"use strict";(self.webpackChunkreact_2=self.webpackChunkreact_2||[]).push([[460],{4460:function(t,s,e){e.r(s),e.d(s,{default:function(){return Y}});var o=e(8185),n=e(7242),i=e(2032),r=e(5295),a=e(943),c=e(7124),l={},u=e(3857),d={description:"ProfileInfo_description__945PC",head_img:"ProfileInfo_head_img__jr6KZ",main_description:"ProfileInfo_main_description__BIpMc",main_description_pers:"ProfileInfo_main_description_pers__hr16D",status_wrapper:"ProfileInfo_status_wrapper__TgDcy",status:"ProfileInfo_status__IqauL",status_input:"ProfileInfo_status_input__MR1Ys",profile_photo:"ProfileInfo_profile_photo__4EN0L",photo_choose:"ProfileInfo_photo_choose__9rGVY",description_block:"ProfileInfo_description_block__QJedc",contacts_block:"ProfileInfo_contacts_block__x0rTr",contact_name:"ProfileInfo_contact_name__4vZGB",form_error:"ProfileInfo_form_error__AHbDV",edit_form:"ProfileInfo_edit_form__KSH9-",edit_btn:"ProfileInfo_edit_btn__ohYtr",save_changes_btn:"ProfileInfo_save_changes_btn__9ZOGS"},p=e(9552),f=e(7522),h=function(t){var s=(0,c.useState)(!1),e=(0,u.Z)(s,2),o=e[0],n=e[1],i=(0,c.useState)(t.status),r=(0,u.Z)(i,2),a=r[0],l=r[1];(0,c.useEffect)((function(){l(t.status)}),[t.status]);return(0,f.jsxs)(f.Fragment,{children:[!o&&(0,f.jsx)("div",{className:d.status_wrapper,children:(0,f.jsx)("span",{className:d.status,onDoubleClick:function(){t.isOwner&&n(!0)},children:t.status||"------"})}),o&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{className:d.status_input,autoFocus:!0,value:a,onChange:function(t){l(t.currentTarget.value)},onBlur:function(){n(!1),t.updateStatus(a)},placeholder:"Your status"})})]})},_=e(4299),m=e(7575),x=e(7243),j=e(7241),b=function(t){var s=t.profile,e=t.saveProfile,o=t.deactivateEditMode,n={fullName:s.fullName||"",aboutMe:s.aboutMe||"",lookingForAJob:s.lookingForAJob,lookingForAJobDescription:s.lookingForAJobDescription||"",contacts:{facebook:s.contacts.facebook||"",website:s.contacts.website||"",vk:s.contacts.vk||"",twitter:s.contacts.twitter||"",instagram:s.contacts.instagram||"",youtube:s.contacts.youtube||"",github:s.contacts.github||"",mainLink:s.contacts.mainLink||""}};return(0,f.jsx)(m.J9,{initialValues:n,onSubmit:function(t,s){e(t,s.setStatus).then((function(){o(),s.setSubmitting(!1)})),s.setSubmitting(!1)},children:function(t){return(0,f.jsxs)(m.l0,{className:d.edit_form,children:[(0,f.jsx)("button",{type:"submit",disabled:t.isSubmitting,className:(0,j.W)("btn",d.save_changes_btn),children:"Save changes"}),(0,f.jsx)("div",{className:d.form_error,children:t.status}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Full name:"}),(0,f.jsx)(x.g,{control:"input",name:"fullName"})]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"About me:"}),(0,f.jsx)(x.g,{control:"textarea",name:"aboutMe"})]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Looking for a job"}),(0,f.jsx)(m.gN,{type:"checkbox",name:"lookingForAJob"})]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Skills description: "}),(0,f.jsx)(x.g,{control:"textarea",name:"lookingForAJobDescription"})]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Contacts"}),Object.keys(s.contacts).map((function(t){return(0,f.jsxs)("div",{className:d.contacts_block,children:[(0,f.jsx)("h3",{className:d.contact_name,children:t}),(0,f.jsx)(x.g,{control:"input",name:"contacts."+t})]},t)}))]})]})}})},v=e(6441),g=e(8587),k="MyPosts_posts_header__PqCxF",P="MyPosts_post_field__JBC3B",N="MyPosts_submit_btn__W27Th",I="Post_item__NDEuW",S="Post_desc__JS5Pl",y="Post_likes__m6sjG",Z=function(t){return(0,f.jsxs)("div",{className:I,children:[(0,f.jsxs)("div",{className:S,children:[(0,f.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/147/147142.png",alt:""}),(0,f.jsx)("span",{children:t.message})]}),(0,f.jsx)("div",{className:y,children:(0,f.jsxs)("span",{children:[t.likesCount," Likes"]})})]})},A=e(2545),C=A.Ry({postText:A.Z_().required("Required")}),w={postText:""},F=function(t){return(0,f.jsx)(m.J9,{initialValues:w,onSubmit:function(s,e){e.resetForm(),console.log(s),t.onAddPost(s.postText)},validationSchema:C,children:function(t){return(0,f.jsxs)(m.l0,{className:P,children:[(0,f.jsx)(x.g,{control:"textarea",name:"postText",noError:!0,placeholder:"Your post"}),(0,f.jsx)("button",{type:"submit",disabled:!t.isValid,className:"".concat(N," btn"),children:"Post"})]})}})},J=function(t){var s=(0,g.Z)(t.posts).reverse().map((function(t){return(0,f.jsx)(Z,{message:t.message,likesCount:t.likesCount},t.id)}));return(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:k,children:"My posts"}),(0,f.jsx)(F,{onAddPost:function(s){t.addPost(s)}}),s]})},M=e(7800),D=(0,M.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,v.Wl)(s))}}}))(J),O=function(t){var s=t.profile,e=t.status,o=t.updateStatus,n=t.isOwner;return(0,f.jsxs)("div",{children:[(0,f.jsx)(h,{status:e,updateStatus:o,isOwner:n}),s.aboutMe&&(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"About me"}),(0,f.jsx)("p",{children:s.aboutMe})]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Looking for a job:"})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJobDescription&&(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Skills description: "})," ",s.lookingForAJobDescription]}),(0,f.jsxs)("div",{className:d.description_block,children:[(0,f.jsx)("h2",{children:"Contacts"}),Object.keys(s.contacts).map((function(t){return(0,f.jsx)(T,{contactTitle:t,contactValue:s.contacts[t]},t)}))]})]})},T=function(t){var s=t.contactTitle,e=t.contactValue;return(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:s}),": ",e]})},E=function(t){var s=t.profile,e=t.status,o=t.updateStatus,n=t.isOwner,i=t.savePhoto,r=t.saveProfile,a=(0,c.useState)(!1),l=(0,u.Z)(a,2),h=l[0],m=l[1];if(!s)return(0,f.jsx)(p.Z,{});var x=function(t){t.target.files.length&&i(t.target.files[0])};return(0,f.jsx)("div",{className:d.content,children:(0,f.jsxs)("div",{className:d.description,children:[(0,f.jsxs)("div",{className:d.main_description,children:[(0,f.jsxs)("div",{className:d.main_description_pers,children:[(0,f.jsx)("img",{className:d.profile_photo,src:s.photos.large||_,alt:""}),(0,f.jsx)("h1",{children:s.fullName})]}),n&&!h?(0,f.jsx)("button",{onClick:function(){return m(!0)},className:(0,j.W)("btn",d.edit_btn),children:"Edit profile"}):null]}),n&&(0,f.jsxs)("label",{className:d.photo_choose,children:["Choose a profile photo",(0,f.jsx)("input",{type:"file",onChange:x})]}),h?(0,f.jsx)(b,{profile:s,saveProfile:r,deactivateEditMode:function(){return m(!1)}}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(O,{profile:s,status:e,updateStatus:o,isOwner:n,onProfilePhotoSelected:x,activateEditMode:function(){return m(!0)}}),(0,f.jsx)(D,{})]})]})})},L=function(t){return(0,f.jsx)("div",{className:l.content,children:(0,f.jsx)(E,{isOwner:t.isOwner,profile:t.profile,status:t.status,updateStatus:t.updateStatus,savePhoto:t.savePhoto,saveProfile:t.saveProfile})})},V=e(9131),q=e(1759),B=e(6743),W=function(t){(0,r.Z)(e,t);var s=(0,a.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t=this.props.router.params.profileId;t||(t=this.props.userId),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s,e){this.props.router.params.profileId!==t.router.params.profileId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)(L,(0,o.Z)((0,o.Z)({},this.props),{},{isOwner:!this.props.router.params.profileId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),e}(c.Component),Y=(0,B.qC)((0,M.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,userId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:v.et,getStatus:v.lR,updateStatus:v.Nf,savePhoto:v.Ju,saveProfile:v.Ii}),V.Z,q.D)(W)},1759:function(t,s,e){e.d(s,{D:function(){return h}});var o=e(8185),n=e(7242),i=e(2032),r=e(5295),a=e(943),c=e(7124),l=e(4042),u=e(7800),d=e(9131),p=e(7522),f=function(t){return{isAuth:t.auth.isAuth,userId:t.auth.userId}},h=function(t){var s=function(s){(0,r.Z)(c,s);var e=(0,a.Z)(c);function c(){return(0,n.Z)(this,c),e.apply(this,arguments)}return(0,i.Z)(c,[{key:"render",value:function(){return this.props.isAuth||this.props.router.params.profileId?(0,p.jsx)(t,(0,o.Z)({},this.props)):(0,p.jsx)(l.Fg,{to:"/login"})}}]),c}(c.Component);return(0,d.Z)((0,u.$j)(f)(s))}}}]);
//# sourceMappingURL=460.4649a8ce.chunk.js.map